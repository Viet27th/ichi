{"version":3,"file":"static/webpack/static/development/pages/login.js.5d8f6747011681865ff9.hot-update.js","sources":["webpack:///./components/login/index.js"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport style from './style.css';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport {axiosInstance} from '../../services/axios.service';\nimport {regexEmail} from '../../services/regex.service';\nimport {AlertComponentEvolution} from '../../components/alert';\nimport {SpinnerComponentEvolution} from '../../components/spinner';\nimport cookie from '../../services/cookie.service';\nimport middleware from '../../middleware';\nimport {express_api} from '../../services/express_api.service';\n\nclass LoginComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      password: ''\n    };\n  }\n  \n  render() {\n    return (\n      <div id=\"wrapped-login\">\n        <div id='login'>\n          <h2>Login</h2>\n          <input name='email' placeholder='Email' type='text'\n                 value={this.state.email}\n                 onChange={this.handleChange}\n          />\n          <input name='password' placeholder='Password' type='password'\n                 value={this.state.password}\n                 onChange={this.handleChange}\n          />\n          \n          <div className='social pt-5 pb-3 d-flex justify-content-center align-items-center'>\n            <span className='twitter cursor-pointer'>\n              <i className=\"fab fa-twitter\"></i>\n            </span>\n            <span className='facebook cursor-pointer'>\n              <i className=\"fab fa-facebook-f\"></i>\n            </span>\n            <span className='google-plus cursor-pointer'>\n              <i className=\"fab fa-google-plus-g\"></i>\n            </span>\n            <span className='youtube cursor-pointer'>\n              <i className=\"fab fa-github\"></i>\n            </span>\n          </div>\n          \n          <input type='submit' value='Login' onClick={this.handleSubmit}/>\n        </div>\n        \n        <style jsx>{style}</style>\n      </div>\n    );\n  }\n  \n  /**\n   * Refer: https://medium.freecodecamp.org/what-i-wish-i-knew-when-i-started-to-work-with-react-js-3ba36107fd13\n   * @param e\n   */\n  handleChange = e => {\n    let {target} = e;\n    this.setState({\n      [target.name]: target.value\n    });\n  };\n  \n  handleSubmit = () => {\n    if (!regexEmail(this.state.email) || this.state.email.trim() === '') {\n      AlertComponentEvolution.show('Email không chính xác.');\n    } else if (this.state.password.trim() === '') {\n      AlertComponentEvolution.show('Password không được để trống.');\n    } else {\n      SpinnerComponentEvolution.show();\n      axiosInstance().post(express_api.webLoginTraditionalUrl, {\n        email: this.state.email,\n        password: this.state.password\n      }).then(result => {\n        SpinnerComponentEvolution.hide();\n        if (result.data.requestSuccessfully) {\n          // Set cookie client\n          cookie.clientSetCookie('token', result.data.data.token, result.data.data.expMillisecond);\n          console.log(1,document.getElementById('dirtyWayToInjectLoginComponent'))\n          let el = document.getElementById('dirtyWayToInjectLoginComponent');\n          if (el) {\n            document.body.style.overflow = null;\n            ReactDOM.unmountComponentAtNode(el);\n            document.body.removeChild(el);\n          }\n          \n        } else {\n          AlertComponentEvolution.show(result.data.message);\n        }\n      }).catch(error => {\n        SpinnerComponentEvolution.hide();\n        console.log(error);\n        AlertComponentEvolution.show(error.message);\n      });\n    }\n  };\n}\n\n/**\n *\n */\nlet show = function () {\n  // if (!document.getElementById('dirtyWayToInjectLoginComponent')) {\n    document.body.style.overflow = 'hidden';\n    let el = document.createElement('div');\n    el.setAttribute('id', 'dirtyWayToInjectLoginComponent');\n    ReactDOM.render(\n      <LoginComponent/>,\n      document.body.appendChild(el)\n    );\n  // }\n};\n\n/**\n *\n * @param {Function|Boolean} callback - Option.\n */\nlet hide = function (callback = false) {\n  let el = document.getElementById('dirtyWayToInjectLoginComponent');\n  if (el) {\n    document.body.style.overflow = null;\n    ReactDOM.unmountComponentAtNode(el);\n    document.body.removeChild(el);\n    if (typeof callback === 'function') {\n      callback();\n    }\n  }\n};\n\nexport const LoginComponentEvolution = {show, hide};\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAiDA;AACA;AACA;AAGA;AACA;AAvDA;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvFA;AACA;AACA;AAFA;AAFA;AAMA;AACA;;;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA3BA;AAAA;AAAA;AAiCA;AAEA;;;;;;;;AA9CA;AA4FA;;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAEA;;;;;;AAIA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}